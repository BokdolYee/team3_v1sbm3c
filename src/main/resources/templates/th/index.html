<!DOCTYPE html>
<html layout:decorate="~{th/layout}"> <!-- layout.html 상속 -->
  <head>
    <script>
      // 긴급 공지사항 팝업을 여는 함수
      function openUrgentNotice(url) {
        let width = 500;
        let height = 600;
        let left = (window.screen.width - width) / 2 + 450;
        let top = (window.screen.height - height) / 2;

        window.open(
          url,
          "UrgentNotice",
          `width=${width},height=${height},top=${top},left=${left},scrollbars=yes,resizable=no`
        );
      }

      // 페이지가 로드되면 긴급 공지사항이 있으면 자동으로 팝업을 띄운다.
      window.onload = function () {
        var urgentIssueUrl = "/issue/urgent"; // 수정된 부분: Thymeleaf 구문으로 수정
        if (urgentIssueUrl && urgentIssueUrl !== '') {
          openUrgentNotice(urgentIssueUrl);
        } else {
          console.log("urgentIssueUrl is empty or not passed correctly.");
        }
      };

      // 일정 보기 버튼 클릭 시 list_calendar.html을 동적으로 로드
      function loadCalendar() {
        const calendarContainer = document.getElementById("calendarContainer");

        // AJAX 요청
        fetch('/calendar/main_list_calendar') // HomeCont에서 제공하는 URL로 요청
          .then(response => response.text())
          .then(data => {
            calendarContainer.innerHTML = data; // 데이터를 받아서 로드
          })
          .catch(error => {
            console.error('Error loading calendar:', error);
          });
      }
    </script>
  </head>
  <div layout:fragment="content" style="width: 80%; margin: 50px auto; text-align: center;">
    <h1>시작 화면</h1><br>
    <img src="/images/1main.jpg" style="width: 40%;"> <!-- /static/images/main.jpg -->
    <br>
    <!-- "일정 보기" 버튼 -->
    <button onclick="loadCalendar()">일정 보기</button>
    <br>

    <!-- 일정 내용이 로드될 부분 -->
    <div id="calendarContainer"></div>
  </div>
</html>
