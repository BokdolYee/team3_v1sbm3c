<!DOCTYPE html>

<html layout:decorate="~{th/layout}"> <!-- layout.html ìƒì†-->
<div layout:fragment="content">

  <div class='title_line'>ìˆ˜ìµ ì¸ì¦ ê²Œì‹œíŒ</div>

  <aside class="aside_right">
    <a href="javascript:location.reload();">ìƒˆë¡œê³ ì¹¨</a>
    <span th:if="${session.memberno != null}" class='menu_divide' >â”‚</span>
    <a th:if="${session.memberno != null}" href="javascript:location.href='/post_earning/create'">ê¸€ì“°ê¸°</a>
    <span class='menu_divide' >â”‚</span>
    <a href="javascript:location.href='/post_earning/list_by_postno'">ëª©ë¡</a>
    <span th:if="${session.memberno == post_earningVO.memberno}" class='menu_divide' >â”‚</span>
    <a th:if="${session.memberno == post_earningVO.memberno}" th:href="@{|/post_earning/update_text?postno=${post_earningVO.postno}|}">ìˆ˜ì •</a>
    <span class='menu_divide' >â”‚</span>
    <a th:if="${session.memberno != null}" href='/member/logout'>ë¡œê·¸ì•„ì›ƒ</a>
  </aside> 

  <div class='menu_line'></div>

  <fieldset class="fieldset_basic">
    <div class="post_content">
      <div class="post_header">
        <div class="post_title">
          <h1><span th:text="${post_earningVO.title}" class="fs-3"></span></h1>
        </div>
        <div class="post_info">
          <span th:text="'ì‘ì„±ì: ' + ${post_earningVO.nickname}"></span>
          <span th:text="'ì‘ì„±ì¼: ' + ${post_earningVO.rdate}"></span>
          <span th:text="'ì¡°íšŒìˆ˜: ' + ${post_earningVO.viewcnt}"></span>
          <span th:text="'ì¶”ì²œìˆ˜: ' + ${post_earningVO.goodcnt}"></span>
        </div>
      </div>
    
      <div class="post_body">
        <div class="chat_log">
          <span th:text="${post_earningVO.content}"></span>
        </div>
      </div>
    
      <div class="post_footer">
        <div class="vote_buttons">
          <button class="vote_up">ğŸ‘ <span>0</span></button>
          <button class="vote_down">ğŸ‘ <span>0</span></button>
        </div>
      </div>
    </div>
  </fieldset>
  <fieldset class="fieldset_basic">
    <table class="table table-striped" style='width: 100%;'>
      <colgroup>
        <col style='width: 5%;'/>
        <col style='width: 10%;'/>
        <col style='width: 30%;'/>
        <col style='width: 8%;'/>
        <col style='width: 7%;'/>
        <col style='width: 4%;'/>
        <col style='width: 4%;'/>
      </colgroup>
      <tr>
        <th class='th_bs'>ë²ˆí˜¸</th>
        <th class='th_bs'>ì´ë¯¸ì§€</th>
        <th class='th_bs'>ì œëª©</th>  
        <th class='th_bs'>ì‘ì„±ì</th>
        <th class='th_bs'>ë“±ë¡ì¼</th>
        <th class='th_bs'>ì¡°íšŒìˆ˜</th>
        <th class='th_bs'>ì¶”ì²œìˆ˜</th>
      </tr>
     
      <tr th:each="post_earningVO : ${list}">
        <td class='td_basic' th:text="${post_earningVO.postno}"></td> <!-- ë²ˆí˜¸ -->
        <td class='td_basic'><div>ì¸ë„¤ì¼</div></td>    <!-- ì¸ë„¤ì¼ ì´ë¯¸ì§€ -->
        <td class='td_left'><a th:href="@{|/post_earning/read?postno=${post_earningVO.postno}|}" th:text="${post_earningVO.title}"></a></td>  <!-- ì œëª© -->
        <td class='td_basic' th:text="${post_earningVO.nickname}"></td> <!-- ë‹‰ë„¤ì„ -->
        <td class='td_basic' th:text="${post_earningVO.rdate.substring(0, 16)}"></td> <!-- ë“±ë¡ì¼ -->
        <td class='td_basic' th:text="${post_earningVO.viewcnt}"></td> <!-- ì¡°íšŒìˆ˜ -->
        <td class='td_basic' th:text="${post_earningVO.goodcnt}"></td> <!-- ì¶”ì²œìˆ˜ -->
      </tr>
    </table>
    
    <!-- í˜ì´ì§• -->
    <div class="pagination">
      <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆì„ ë•Œë§Œ í˜ì´ì§• í‘œì‹œ-->
      <th:block th:if="${total > 0}">
        <!-- ì´ì „ í˜ì´ì§€-->
        <a th:if="${pageDTO.prev}" th:href="@{|/post_earning/list_by_postno?page=${pageDTO.startPage - 1}&searchType=${searchDTO.searchType}&keyword=${searchDTO.keyword}|}"></a>
        
        <!-- í˜ì´ì§€ ë²ˆí˜¸-->
        <th:block th:each="num : ${#numbers.sequence(pageDTO.startPage, pageDTO.endPage)}">
          <a th:href="@{|/post_earning/list_by_postno?page=${num}&searchType=${searchDTO.searchType}&keyword=${searchDTO.keyword}|}"
            th:class="${pageDTO.currentPage == num} ? 'active' : ''"
            class="page-link"
            th:text="${num}"></a>
        </th:block>
  
        <!-- ë‹¤ìŒ í˜ì´ì§€-->
        <a th:if="${pageDTO.next}" th:href="@{|/post_earning/list_by_postno?page=${pageDTO.endPage + 1}&searchType=${searchDTO.searchType}&keyword=${searchDTO.keyword}|}"></a>
      </th:block>
    </div>
  
    <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ë•Œ ë©”ì‹œì§€ í‘œì‹œ-->
    <div th:if="${total == 0}" class="text-center mt-3">ê²€ìƒ‰ ê²°ê³¼ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
  
  
    <script>
      function search() {
        const searchType = document.getElementById('searchType').value;
        const keyword = document.getElementById('keyword').value;
          
        if (keyword.trim() === '') {
          alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
          return;
        }
          
        location.href = `/post_earning/read?page=1&searchType=${searchType}&keyword=${keyword}`;
      }
      
      // ì—”í„°í‚¤ ê²€ìƒ‰ ê¸°ëŠ¥
      document.getElementById('keyword').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          search();
        }
      });
    </script>
  
    <div class='bottom_menu'>
      <select id="searchType" th:value="${searchDTO.searchType}">
        <option value="title">ì œëª©</option>
        <option value="content">ë‚´ìš©</option>
        <option value="nickname">ë‹‰ë„¤ì„</option>
      </select>
      <input type="text" id="keyword" th:value="${searchDTO.keyword}" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
      <button onclick="search()">ê²€ìƒ‰</button>
      <button th:onclick="|location.href='/post_earning/list_by_postno'|">ì·¨ì†Œ</button>
    </div>
  </fieldset>


</div>
</html>